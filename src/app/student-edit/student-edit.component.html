<form [formGroup]="editForm" (ngSubmit)="onSubmit()">
  <!-- First Name -->
  <div>
      <label for="firstName">First Name</label>
      <input id="firstName" formControlName="firstName">
      <div *ngIf="editForm.get('firstName')?.invalid && editForm.get('firstName')?.touched">
          First Name is required
      </div>
  </div>

  <!-- Last Name -->
  <div>
      <label for="lastName">Last Name</label>
      <input id="lastName" formControlName="lastName">
      <div *ngIf="editForm.get('lastName')?.invalid && editForm.get('lastName')?.touched">
          Last Name is required
      </div>
  </div>

  <!-- Date of Birth -->
  <div>
      <label for="dob">Date of Birth</label>
      <input id="dob" formControlName="dob" type="date">
      <div *ngIf="editForm.get('dob')?.invalid && editForm.get('dob')?.touched">
          Date of Birth is required in dd-mm-yyyy format
      </div>
  </div>

  <!-- Email -->
  <div>
      <label for="email">Email</label>
      <input id="email" formControlName="email">
      <div *ngIf="editForm.get('email')?.invalid && editForm.get('email')?.touched">
          <div *ngIf="editForm.get('email')?.hasError('required')">Email is required</div>
          <div *ngIf="editForm.get('email')?.hasError('email')">Email is invalid</div>
          <div *ngIf="emailTaken">Email already exists</div>
      </div>
  </div>

  <!-- Address Group -->
  <div formGroupName="address">
      <label for="address">Address</label>
      <textarea id="address" formControlName="address"></textarea>
      <div *ngIf="editForm.get('address.address')?.invalid && editForm.get('address.address')?.touched">
          Address is required
      </div>

      <label for="state">State</label>
      <select id="state" formControlName="state" (change)="onStateChange($event)">
          <option *ngFor="let state of states" [value]="state">{{ state }}</option>
      </select>
      <div *ngIf="editForm.get('address.state')?.invalid && editForm.get('address.state')?.touched">
          State is required
      </div>

      <label for="city">City</label>
      <select id="city" formControlName="city">
          <option *ngFor="let city of cities" [value]="city">{{ city }}</option>
      </select>
      <div *ngIf="editForm.get('address.city')?.invalid && editForm.get('address.city')?.touched">
          City is required
      </div>

      <label for="pincode">Pincode</label>
      <input id="pincode" formControlName="pincode" type="number">
      <div *ngIf="editForm.get('address.pincode')?.invalid && editForm.get('address.pincode')?.touched">
          Pincode must be 6 digits
      </div>
  </div>

  <!-- Subjects -->
  <div>
      <label>Subjects</label>
      <div *ngFor="let subject of subjects">
          <input type="checkbox" (change)="onSubjectChange($event)" [value]="subject"> {{ subject }}
      </div>
      <div *ngIf="editForm.get('subjects')?.invalid && editForm.get('subjects')?.touched">
          At least one subject is required
      </div>
  </div>

  <!-- Previous Educational Details -->
  <div formArrayName="previousEducation">
      <label>Previous Educational Details</label>
      <button type="button" (click)="addEducation()">Add</button>
      <div *ngFor="let edu of previousEducation.controls; let i=index" [formGroupName]="i">
          <label for="school">School</label>
          <input id="school" formControlName="school">
          <div *ngIf="edu.get('school')?.invalid && edu.get('school')?.touched">
              School is required
          </div>

          <label for="yearStart">Year of Start</label>
          <input id="yearStart" formControlName="yearStart" type="date">
          <div *ngIf="edu.get('yearStart')?.invalid && edu.get('yearStart')?.touched">
              Year of Start is required in dd-mm-yyyy format
          </div>

          <label for="yearEnd">Year of End</label>
          <input id="yearEnd" formControlName="yearEnd" type="date">
          <div *ngIf="edu.get('yearEnd')?.invalid && edu.get('yearEnd')?.touched">
              Year of End is required in dd-mm-yyyy format
          </div>

          <button type="button" (click)="removeEducation(i)">Remove</button>
      </div>
  </div>

  <button type="submit" [disabled]="editForm.invalid">Submit</button>
</form>
